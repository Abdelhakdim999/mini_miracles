
{% extends 'base.html.twig' %}




{% block body %}

    <div class="jumbotron text-center">
        <center>
            <h2><label  for="topicOptions" style="font-size: 28px; color: #5bc0de;" class="ng-binding" >Ajouter événement </label></h2>
            {{ form_start(form) }}
            <fieldset style="width: 30%;margin: auto;">
            <TABLE class="table table-striped">
                <tr><td ><div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                        <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding">Lieu <i class="fa  fa-globe"></i></label>


                            <div class="my-custom-class-for-errors">
                                {{ form_errors(form) }}
                            </div>



                        {{ form_widget(form.lieu) }}<br><br>


                        </div>

                    </td></tr>



                <tr><td>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                            <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding">Nom  <i class="fa  fa-child"></i></label>

                            {{ form_widget(form.nom) }}<br><br>
                        </div>
                      </td></tr>

                <tr><td>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                            <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding">Photo <i class="fa  fa-child"></i></label>

                            {{ form_widget(form.photo) }}<br><br>
                        </div>
                    </td></tr>


                <tr><td>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                            <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding">Prix <i class="fa  fa-credit-card"></i></label>



                            {{ form_widget(form.prix) }}<br><br>
                        </div>
                    </td></tr>

                <tr><td>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                            <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding">places <i class="fa fa-plus"></i></label>

                            {{ form_widget(form.nbPlaces) }}<br><br>
                        </div>
                    </td></tr>

                <tr><td>




                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style="border-bottom:none">
                    <label  for="topicOptions" style="font-size: 18px; color: #0b3e6f;" class="ng-binding" > Date  <i class="fa fa-calendar"></i></label>
                    <div class="input-group date">
                        <div class="input-group-addon" >


                            {{ form_widget(form.dateEvent) }}




                            <div  style="visibility: hidden">

                                <label id="now" >    {{ "now"|date("m/d/Y") }}</label>
                            </div>

                        </div>


                    </div>


                </div>
                </td></tr>

                <tr><td colspan="2" align="center">
                        <input type="submit" value="valider" class="btn btn-primary " id="sub">
                    </td></tr>



            </TABLE>
            </fieldset>

            {{ form_end(form) }}


        </center>

        <div class="text-center">

            <a href="{{ path('evenement_read') }}" class="btn btn-primary">   <i class="fa fa-list"> <br> Retour</i>  </a>
        </div>
    </div>



    {% if not form.vars.valid %}
        <ul class="alert alert-danger">
            {# on affiche en premier les erreurs globales (cas classiques) #}
            {% for error in form.vars.errors %}
                <li>{{error.message}}</li>
            {% endfor %}
            {# ainsi que les erreurs concernant chaque champs #}
            {% for child in form.children %}
                {# si le champ à des erreur #}
                {% if child.vars.errors is defined %}
                    {% for error in child.vars.errors %}
                        <li>"{{child.vars.label}}" : {{error.message}} </li> {# on ajoute le label du champ devant l'erreur pour plus de précisions. #}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        </ul>
    {% endif %}


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>


        $('#eventbundle_evenement_prix').keyup(function () {


            $.ajax({

                success: function (data) {
                    var x=$('#eventbundle_evenement_prix').val();
                    if (x < 1 ) {
                        alert('Cette valeur doit être strictement supérieur à 1');


                        $('#sub').prop('disabled', true);

                    } else {

                        $('#sub').prop('disabled', false);
                    }
                }
            });


        });



        $('#eventbundle_evenement_nbPlaces').keyup(function () {


            $.ajax({

                success: function (data) {
                    var x=$('#eventbundle_evenement_nbPlaces').val();
                    if (x < 1 ) {
                        alert('Cette valeur doit être strictement supérieur à 1');


                        $('#sub').prop('disabled', true);

                    } else {

                        $('#sub').prop('disabled', false);
                    }
                }
            });


        });


        $('#eventbundle_evenement_nom').keyup(function () {


            $.ajax({

                success: function (data) {
                    var x=$('#eventbundle_evenement_nom').val();
                    if (x.length < 3 ) {
                        alert('La longueur doit être strictement supérieur à 3');


                        $('#sub').prop('disabled', true);

                    } else {

                        $('#sub').prop('disabled', false);
                    }
                }
            });


        });

        $('#eventbundle_evenement_lieu').keyup(function () {


            $.ajax({

                success: function (data) {
                    var x=$('#eventbundle_evenement_lieu').val();
                    if (x.length < 3 ) {
                        alert('La longueur doit être strictement supérieur à 3');


                        $('#sub').prop('disabled', true);

                    } else {

                        $('#sub').prop('disabled', false);
                    }
                }
            });


        });






        $('#eventbundle_evenement_dateEvent_time_minute').keyup(function () {


            $.ajax({

                success: function (data) {
                    var x=$('#eventbundle_evenement_dateEvent_time_minute').val();
                    var y=$('#now').val();

                    if (x < y ) {
                        alert('Date doit être strictement supérieur à  la date d’aujourd’hui' );


                        $('#sub').prop('disabled', true);

                    } else {

                        $('#sub').prop('disabled', false);
                    }
                }
            });


        });
    </script>



{% endblock %}
